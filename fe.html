<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>地理位置分享</title>
    <script>
        // 页面加载完成后执行
        window.onload = function() {
            // 检查浏览器是否支持地理位置API
            if (navigator.geolocation) {
                // 获取当前位置
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        // 获取成功时的回调函数
                        const latitude = position.coords.latitude;
                        const longitude = position.coords.longitude;
                        
                        // 显示位置信息（可选）
                        document.getElementById("location").innerHTML = 
                            `您的位置是：纬度 ${latitude}，经度 ${longitude}`;
                        
                        // 将位置数据发送到另一个网站
                        sendLocationToServer(latitude, longitude);
                    },
                    function(error) {
                        // 获取失败时的回调函数
                        let errorMessage = "获取位置失败：";
                        switch(error.code) {
                            case error.PERMISSION_DENIED:
                                errorMessage += "用户拒绝了位置请求";
                                break;
                            case error.POSITION_UNAVAILABLE:
                                errorMessage += "位置信息不可用";
                                break;
                            case error.TIMEOUT:
                                errorMessage += "获取位置请求超时";
                                break;
                            case error.UNKNOWN_ERROR:
                                errorMessage += "发生未知错误";
                                break;
                        }
                        document.getElementById("location").innerHTML = errorMessage;
                    }
                );
            } else {
                document.getElementById("location").innerHTML = "您的浏览器不支持地理位置功能";
            }
        };
        
        // 发送位置数据到服务器的函数
        function sendLocationToServer(latitude, longitude) {
            // 这里替换为您要发送到的目标URL
            const targetUrl = "https://example.com/receive-location";
            
            // 创建一个表单来发送数据
            const form = document.createElement("form");
            form.setAttribute("method", "post");
            form.setAttribute("action", targetUrl);
            form.setAttribute("target", "_blank"); // 在新窗口打开
            
            // 添加纬度字段
            const latField = document.createElement("input");
            latField.setAttribute("type", "hidden");
            latField.setAttribute("name", "latitude");
            latField.setAttribute("value", latitude);
            form.appendChild(latField);
            
            // 添加经度字段
            const lngField = document.createElement("input");
            lngField.setAttribute("type", "hidden");
            lngField.setAttribute("name", "longitude");
            lngField.setAttribute("value", longitude);
            form.appendChild(lngField);
            
            // 将表单添加到页面并提交
            document.body.appendChild(form);
            form.submit();
            
            // 提交后移除表单
            document.body.removeChild(form);
        }
    </script>
</head>
<body>
    <h1>地理位置分享</h1>
    <div id="location">正在获取您的位置...</div>
    <p>我们正在请求获取您的地理位置信息，以便为您提供更好的服务。</p>
</body>
</html>
